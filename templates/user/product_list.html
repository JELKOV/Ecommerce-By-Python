{% extends "base/layout.html" %}

{% block title %}ìƒí’ˆ ëª©ë¡ - My Shop{% endblock %}

{% block content %}
    <h1>ìƒí’ˆ ëª©ë¡</h1>

    <!-- ğŸ”¹ ê²€ìƒ‰ ë° í•„í„°ë§ í¼ -->
    <form action="{{ url_for('product_routes.product_list') }}" method="GET">
        <input type="text" name="query" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" value="{{ query }}">
        <input type="number" name="min_price" placeholder="ìµœì†Œ ê°€ê²©" value="{{ min_price or '' }}">
        <input type="number" name="max_price" placeholder="ìµœëŒ€ ê°€ê²©" value="{{ max_price or '' }}">

        <select name="sort_by">
            <option value="latest" {% if sort_by == 'latest' %}selected{% endif %}>ìµœì‹ ìˆœ</option>
            <option value="price_asc" {% if sort_by == 'price_asc' %}selected{% endif %}>ê°€ê²© ë‚®ì€ ìˆœ</option>
            <option value="price_desc" {% if sort_by == 'price_desc' %}selected{% endif %}>ê°€ê²© ë†’ì€ ìˆœ</option>
        </select>

        <button type="submit">ê²€ìƒ‰</button>
    </form>

    <!-- ğŸ”¹ ìƒí’ˆ ëª©ë¡ -->
    <div id="product-list">
        {% for product in products.items %}
            <div class="product-item">
                <h2>{{ product.name }}</h2>
                <p>{{ product.description }}</p>
                <p>ê°€ê²©: {{ product.price }}ì›</p>
                <img src="{{ product.image_url }}" width="150" alt="ìƒí’ˆ ì´ë¯¸ì§€">
                <a href="{{ url_for('product_routes.product_detail', product_id=product.id) }}">ìƒì„¸ë³´ê¸°</a>
            </div>
        {% endfor %}
    </div>

    <!-- ğŸ”¹ í˜ì´ì§• -->
    <div class="pagination">
        {% if products.has_prev %}
            <a href="{{ url_for('product_routes.product_list', page=products.prev_num, query=query, min_price=min_price, max_price=max_price, sort_by=sort_by) }}">ì´ì „</a>
        {% endif %}

        <span>{{ products.page }} / {{ products.pages }}</span>

        {% if products.has_next %}
            <a href="{{ url_for('product_routes.product_list', page=products.next_num, query=query, min_price=min_price, max_price=max_price, sort_by=sort_by) }}">ë‹¤ìŒ</a>
        {% endif %}
    </div>
{% endblock %}
